node	{
    def app

environment {
        // Define environment variables
        AWS_REGION = 'ap-south-1' // Specify your AWS region
       // ECR_REPOSITORY = 'dev/ecommerce_pos'  // Replace with your ECR repository name
      // ECR_URI = "116981781220.dkr.ecr.ap-south-1.amazonaws.com/dev/ecommerce_pos"  // ECR URI format
        IMAGE_NAME = 'mission' // Docker image name
        IMAGE_TAG = 'latest' // Docker image tag
       // KUBECONFIG = '/path/to/kubeconfig' // Path to your kubeconfig for EKS
    }
  
    stage('Clone repository') {
        checkout scm
    }

        stage("Build Maven"){
                sh 'mvn clean package -eX -DskipTests=true'
            
        }
	
    stage('Build image with Docker') {
           sh 'docker build -t java/mission .'
	    sh "docker ps"
        
    }
 }
